{"ast":null,"code":"var _jsxFileName = \"C:\\\\Dumbways\\\\BATCH 36\\\\dumbmerch\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect } from 'react';\nimport { Route, Routes, useNavigate } from 'react-router-dom';\nimport AddCategory from './Admin/Add-Category';\nimport AddProduct from './Admin/Add-Product';\nimport Category from './Admin/Category';\nimport AdminComplain from './Admin/Complain';\nimport EditCategory from './Admin/Edit-Category';\nimport EditProduct from './Admin/Edit-Product';\nimport Product from './Admin/Product';\nimport PrivateRoute from './Components/Private-Route/Private-Route';\nimport { API } from './Config/Api';\nimport { UserContext } from './Context/User-Context';\nimport Auth from './Pages/Auth';\nimport DetailPage from './Pages/Detail-Page';\nimport Homepage from './Pages/Homepage';\nimport Profile from './Pages/Profile';\nimport UserComplain from './Pages/User-Complain';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [state, dispatch] = useContext(UserContext);\n  const api = API();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!state.isLogin) {\n      navigate('/auth');\n    } else {\n      if (state.user.status === 'admin') {\n        navigate('/admin-complain');\n      } else if (state.user.status === 'customer') {\n        navigate('/homepage');\n      }\n    }\n  }, [state]);\n\n  const checkUser = async () => {\n    try {\n      const config = {\n        method: 'GET',\n        headers: {\n          Authorization: 'Basic ' + localStorage.token\n        }\n      };\n      const response = await api.get('/check-auth', config); // console.log(response)\n\n      if (response.status === 'Failed') {\n        return dispatch({\n          type: 'AUTH_ERROR'\n        });\n      }\n\n      let payload = response.data.user;\n      payload.token = localStorage.token;\n      dispatch({\n        type: 'USER_SUCCESS',\n        payload\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    checkUser();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/auth\",\n      element: /*#__PURE__*/_jsxDEV(Auth, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 36\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), \"l\", /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/homepage\",\n      element: /*#__PURE__*/_jsxDEV(Homepage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 42\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"Re0eTy8CDObIz013zdbUwPB97RQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useContext","useEffect","Route","Routes","useNavigate","AddCategory","AddProduct","Category","AdminComplain","EditCategory","EditProduct","Product","PrivateRoute","API","UserContext","Auth","DetailPage","Homepage","Profile","UserComplain","App","state","dispatch","api","navigate","isLogin","user","status","checkUser","config","method","headers","Authorization","localStorage","token","response","get","type","payload","data","error","console","log"],"sources":["C:/Dumbways/BATCH 36/dumbmerch/client/src/App.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport { Route, Routes, useNavigate } from 'react-router-dom'\nimport AddCategory from './Admin/Add-Category';\nimport AddProduct from './Admin/Add-Product';\nimport Category from './Admin/Category';\nimport AdminComplain from './Admin/Complain';\nimport EditCategory from './Admin/Edit-Category';\nimport EditProduct from './Admin/Edit-Product';\nimport Product from './Admin/Product';\nimport PrivateRoute from './Components/Private-Route/Private-Route';\nimport { API } from './Config/Api';\nimport { UserContext } from './Context/User-Context';\n\nimport Auth from './Pages/Auth';\nimport DetailPage from './Pages/Detail-Page';\nimport Homepage from './Pages/Homepage'\nimport Profile from './Pages/Profile';\nimport UserComplain from './Pages/User-Complain';\n\nfunction App() {\n\n  const [state, dispatch] = useContext(UserContext)\n\n  const api = API()\n  const navigate = useNavigate()\n  \n  useEffect(() => {\n    if (!state.isLogin) {\n      navigate('/auth')\n    } else {\n      if (state.user.status === 'admin') {\n        navigate('/admin-complain')\n      } else if (state.user.status === 'customer') {\n        navigate('/homepage')\n      }\n    }\n  }, [state])\n\n  const checkUser = async () => {\n    try {\n      const config = {\n        method: 'GET',\n        headers: {\n          Authorization: 'Basic ' + localStorage.token\n        }\n      }\n      const response = await api.get('/check-auth', config)\n      // console.log(response)\n\n      if (response.status === 'Failed') {\n        return dispatch({\n          type: 'AUTH_ERROR'\n        })\n      }\n\n      let payload = response.data.user\n      payload.token = localStorage.token\n\n      dispatch({\n        type: 'USER_SUCCESS',\n        payload\n      })\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  useEffect(() => {\n    checkUser()\n  }, [])\n\n  return (\n    <Routes>\n      <Route path='/auth' element={<Auth />} />l\n        <Route path='/homepage' element={<Homepage />} />\n        {/* <Route path='/product/:id' element={<DetailPage />} />\n        <Route path='/profile' element={<Profile />} />\n        <Route path='/user-complain' element={<UserComplain />} />\n        <Route path='/admin-complain' element={<AdminComplain />} />\n        <Route path='/category' element={<Category />} />\n        <Route path='/edit-category/:id' element={<EditCategory />} />\n        <Route path='/add-category' element={<AddCategory />} />\n        <Route path='/product' element={<Product />} />\n        <Route path='/add-product' element={<AddProduct />} />\n        <Route path='/edit-product/:id' element={<EditProduct />} />\n      </Route> */}\n    </Routes>\n  );\n}\n\nexport default App;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,WAAxB,QAA2C,kBAA3C;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,YAAP,MAAyB,0CAAzB;AACA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,WAAT,QAA4B,wBAA5B;AAEA,OAAOC,IAAP,MAAiB,cAAjB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;;;AAEA,SAASC,GAAT,GAAe;EAAA;;EAEb,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBtB,UAAU,CAACc,WAAD,CAApC;EAEA,MAAMS,GAAG,GAAGV,GAAG,EAAf;EACA,MAAMW,QAAQ,GAAGpB,WAAW,EAA5B;EAEAH,SAAS,CAAC,MAAM;IACd,IAAI,CAACoB,KAAK,CAACI,OAAX,EAAoB;MAClBD,QAAQ,CAAC,OAAD,CAAR;IACD,CAFD,MAEO;MACL,IAAIH,KAAK,CAACK,IAAN,CAAWC,MAAX,KAAsB,OAA1B,EAAmC;QACjCH,QAAQ,CAAC,iBAAD,CAAR;MACD,CAFD,MAEO,IAAIH,KAAK,CAACK,IAAN,CAAWC,MAAX,KAAsB,UAA1B,EAAsC;QAC3CH,QAAQ,CAAC,WAAD,CAAR;MACD;IACF;EACF,CAVQ,EAUN,CAACH,KAAD,CAVM,CAAT;;EAYA,MAAMO,SAAS,GAAG,YAAY;IAC5B,IAAI;MACF,MAAMC,MAAM,GAAG;QACbC,MAAM,EAAE,KADK;QAEbC,OAAO,EAAE;UACPC,aAAa,EAAE,WAAWC,YAAY,CAACC;QADhC;MAFI,CAAf;MAMA,MAAMC,QAAQ,GAAG,MAAMZ,GAAG,CAACa,GAAJ,CAAQ,aAAR,EAAuBP,MAAvB,CAAvB,CAPE,CAQF;;MAEA,IAAIM,QAAQ,CAACR,MAAT,KAAoB,QAAxB,EAAkC;QAChC,OAAOL,QAAQ,CAAC;UACde,IAAI,EAAE;QADQ,CAAD,CAAf;MAGD;;MAED,IAAIC,OAAO,GAAGH,QAAQ,CAACI,IAAT,CAAcb,IAA5B;MACAY,OAAO,CAACJ,KAAR,GAAgBD,YAAY,CAACC,KAA7B;MAEAZ,QAAQ,CAAC;QACPe,IAAI,EAAE,cADC;QAEPC;MAFO,CAAD,CAAR;IAID,CAvBD,CAuBE,OAAOE,KAAP,EAAc;MACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACD;EACF,CA3BD;;EA6BAvC,SAAS,CAAC,MAAM;IACd2B,SAAS;EACV,CAFQ,EAEN,EAFM,CAAT;EAIA,oBACE,QAAC,MAAD;IAAA,wBACE,QAAC,KAAD;MAAO,IAAI,EAAC,OAAZ;MAAoB,OAAO,eAAE,QAAC,IAAD;QAAA;QAAA;QAAA;MAAA;IAA7B;MAAA;MAAA;MAAA;IAAA,QADF,oBAEI,QAAC,KAAD;MAAO,IAAI,EAAC,WAAZ;MAAwB,OAAO,eAAE,QAAC,QAAD;QAAA;QAAA;QAAA;MAAA;IAAjC;MAAA;MAAA;MAAA;IAAA,QAFJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAiBD;;GArEQR,G;UAKUhB,W;;;KALVgB,G;AAuET,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}